<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!-- Required Meta Tags Always Come First -->

  <meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Invoice">
  <!-- Title -->
  <title>Invoice | StockDaddy</title>

  <!-- Favicon -->
  <link rel="shortcut icon" href="">

  <!-- CSS HS -->
  <!-- <link rel="stylesheet" href="./invoice_files/main.min.css"> -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>

  <style>
    @media print {
  body {
    visibility: hidden;
  }
  #printArea {
    visibility: visible;
    position: absolute;
    left: 0;
    top: 0;
  }
  #printArea{
    box-shadow: none;
  }
}
  </style>
</head>

<body class="bg-gray-50" id="app">
  <!-- ========== MAIN CONTENT ========== -->
  <main id="content" role="main">
    <!-- Invoice -->
    <div  v-if="!isFetching" class="max-w-[85rem] px-4 sm:px-6 lg:px-8 mx-auto my-4 sm:my-10">
      <div class="sm:w-11/12 lg:w-3/4 mx-auto">
        <!-- Card -->
        <div class="flex flex-col p-4 sm:p-10 bg-white shadow-md" id="printArea">
          <!-- Grid -->
          <div class="flex justify-between">
            
            <!-- Col -->

            <div class="text-start">
              <h2 class="text-2xl md:text-3xl font-semibold text-gray-800">Invoice #</h2>
              <span class="mt-1 block text-gray-500">3682303 {{ data }}</span>

              <address class="mt-4 not-italic text-gray-800">
                Plot No 190, Phase IV <br>
                Udyog Vihar, Sector 18<br>
                Gurugram<br>
                Haryana 122015<br>
              </address>
            </div>
            <!-- Col -->
            <div>
              
              <h1 class="mt-2 text-lg md:text-xl font-semibold text-blue-600">StockDaddy</h1>
            </div>
          </div>
          <!-- End Grid -->

          <!-- Grid -->
          <div class="mt-8 grid sm:grid-cols-2 gap-3">
            <div>
              <h3 class="text-lg font-semibold text-gray-800">Bill to:</h3>
              <h3 class="text-lg font-semibold text-gray-800">Sara Williams</h3>
              <address class="mt-2 not-italic text-gray-500">
                280 Suzanne Throughway,<br>
                Breannabury, OR 45801,<br>
                United States<br>
              </address>
            </div>
            <!-- Col -->

            <div class="sm:text-end space-y-2">
              <!-- Grid -->
              <div class="grid grid-cols-2 sm:grid-cols-1 gap-3 sm:gap-2">
                <dl class="grid sm:grid-cols-5 gap-x-3">
                  <dt class="col-span-3 font-semibold text-gray-800">Invoice date:</dt>
                  <dd class="col-span-2 text-gray-500">03/10/2018</dd>
                </dl>
                <dl class="grid sm:grid-cols-5 gap-x-3">
                  <dt class="col-span-3 font-semibold text-gray-800">Due date:</dt>
                  <dd class="col-span-2 text-gray-500">03/11/2018</dd>
                </dl>
              </div>
              <!-- End Grid -->
            </div>
            <!-- Col -->
          </div>
          <!-- End Grid -->

          <!-- Table -->
          <div class="mt-6">
            <div class="border border-gray-200 p-4 rounded-lg space-y-4">
              <div class="hidden sm:grid sm:grid-cols-5">
                <div class="sm:col-span-2 text-xs font-medium text-gray-500 uppercase">Item</div>
                <div class="text-start text-xs font-medium text-gray-500 uppercase">Qty</div>
                <div class="text-start text-xs font-medium text-gray-500 uppercase">Rate</div>
                <div class="text-end text-xs font-medium text-gray-500 uppercase">Amount</div>
              </div>

              <div class="hidden sm:block border-b border-gray-200"></div>

              <div class="grid grid-cols-3 sm:grid-cols-5 gap-2">
                <div class="col-span-full sm:col-span-2">
                  <h5 class="sm:hidden text-xs font-medium text-gray-500 uppercase">Item</h5>
                  <p class="font-medium text-gray-800">Stock Market Beginner Course</p>
                </div>
                <div>
                  <h5 class="sm:hidden text-xs font-medium text-gray-500 uppercase">Qty</h5>
                  <p class="text-gray-800">1</p>
                </div>
                <div>
                  <h5 class="sm:hidden text-xs font-medium text-gray-500 uppercase">Rate</h5>
                  <p class="text-gray-800">5</p>
                </div>
                <div>
                  <h5 class="sm:hidden text-xs font-medium text-gray-500 uppercase">Amount</h5>
                  <p class="sm:text-end text-gray-800">₹500</p>
                </div>
              </div>

              <!-- <div class="sm:hidden border-b border-gray-200"></div> -->
            </div>
          </div>
          <!-- End Table -->

          <!-- Flex -->
          <div class="mt-8 flex sm:justify-end">
            <div class="w-full max-w-2xl sm:text-end space-y-2">
              <!-- Grid -->
              <div class="grid grid-cols-2 sm:grid-cols-1 gap-3 sm:gap-2">
                <dl class="grid sm:grid-cols-5 gap-x-3">
                  <dt class="col-span-3 font-semibold text-gray-800">Subtotal:</dt>
                  <dd class="col-span-2 text-gray-500">₹2750.00</dd>
                </dl>

                <dl class="grid sm:grid-cols-5 gap-x-3">
                  <dt class="col-span-3 font-semibold text-gray-800">Discount:</dt>
                  <dd class="col-span-2 text-gray-500">₹0.00</dd>
                </dl>

                <dl class="grid sm:grid-cols-5 gap-x-3">
                  <dt class="col-span-3 font-semibold text-gray-800">Total:</dt>
                  <dd class="col-span-2 text-gray-500">₹2750.00</dd>
                </dl>

                <dl class="grid sm:grid-cols-5 gap-x-3">
                  <dt class="col-span-3 font-semibold text-gray-800">GST:</dt>
                  <dd class="col-span-2 text-gray-500">₹39.00</dd>
                </dl>

                <dl class="grid sm:grid-cols-5 gap-x-3">
                  <dt class="col-span-3 font-semibold text-gray-800">Amount paid:</dt>
                  <dd class="col-span-2 text-gray-500">₹2789.00</dd>
                </dl>

                <dl class="grid sm:grid-cols-5 gap-x-3">
                  <dt class="col-span-3 font-semibold text-gray-800">Due balance:</dt>
                  <dd class="col-span-2 text-gray-500">₹0.00</dd>
                </dl>
              </div>
              <!-- End Grid -->
            </div>
          </div>
          <!-- End Flex -->

          <div class="mt-8 sm:mt-12">
            <h4 class="text-lg font-semibold text-gray-800">Thank you!</h4>
            <p class="text-gray-500">If you have any questions concerning this invoice, use the following contact information:</p>
            <div class="mt-2">
              <p class="block text-sm font-medium text-gray-800">support@stockdaddy.in</p>
              <p class="block text-sm font-medium text-gray-800">+91 7838-756-756</p>
            </div>
          </div>
        </div>
        <!-- End Card -->

        <!-- Buttons -->
        <div class="mt-6 flex justify-end gap-x-3">
          <a class="py-2 px-3 inline-flex justify-center items-center gap-2 rounded-lg border font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-blue-600 transition-all text-sm bg-gray-800" href="javascript:window.print();">
            <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" x2="12" y1="15" y2="3"></line>
            </svg>
            Invoice PDF
          </a>
          <a class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none" href="javascript:window.print();">
            <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 6 2 18 2 18 9"></polyline>
              <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
              <rect width="12" height="8" x="6" y="14"></rect>
            </svg>
            Print
          </a>
        </div>
        <!-- End Buttons -->
      </div>
    </div>
    <!-- End Invoice -->
    <div v-else> 
      <div class="flex gap-2 justify-center mt-48">
        <div class="w-5 h-5 rounded-full animate-pulse bg-blue-600"></div>
        <div class="w-5 h-5 rounded-full animate-pulse bg-blue-600"></div>
        <div class="w-5 h-5 rounded-full animate-pulse bg-blue-600"></div>
      </div>
    </div>
  </main>
  <!-- ========== END MAIN CONTENT ========== -->

  
</body>
</html>

<script>
  const { createApp, ref } = Vue

  createApp({
    setup() {
      
    },
    data() {
    return {
      invoice: {
      },
      isFetching: false,
      isLoaded: false
    };
  },
  watch: {
    invoice: {
      handler(oldVal, newVal) {
        if (!this.isFetching) {
          // this comparision doesn't work (cause oldVal/newVal is an object)
          if (oldVal != newVal) {
            this.isLoaded = false;
          }
        }
      },
      deep: true
    },
  },
    created() {
      this.isFetching = true;
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get('id');
      fetch(`http://192.168.1.60:8055/items/invoices?payment=${id}`)
        .then((response) => response.json())
        .then((json) => {
          this.invoice = json.data[0];
          this.isLoaded = true;
        })
        .finally(() => this.isFetching = false)
    },
  }).mount('#app')

  
</script>
